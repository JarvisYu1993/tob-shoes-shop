(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9662a754"],{"6ff1":function(e,t,c){"use strict";var a=c("7a23"),l={id:"delProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},i={class:"modal-dialog"},n={class:"modal-content border-0"},d=Object(a["i"])("div",{class:"modal-header bg-danger text-white"},[Object(a["i"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(a["i"])("span",null,"刪除產品")]),Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),o={class:"modal-body"},r=Object(a["h"])(" 是否刪除 "),s={class:"text-danger"},b=Object(a["h"])(" (刪除後將無法恢復)。 "),O={class:"modal-footer"},u=Object(a["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function j(e,t,c,j,p,m){return Object(a["w"])(),Object(a["e"])("div",l,[Object(a["i"])("div",i,[Object(a["i"])("div",n,[d,Object(a["i"])("div",o,[r,Object(a["i"])("strong",s,Object(a["G"])(c.product.title),1),b]),Object(a["i"])("div",O,[u,Object(a["i"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(t){return e.$emit("delete")})}," 確認刪除 ")])])])],512)}var p=c("7c2b"),m=c.n(p),h={props:{product:{type:Object,default:function(){return{}}}},data:function(){return{modal:""}},mounted:function(){this.modal=new m.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}}};h.render=j;t["a"]=h},b0c0:function(e,t,c){var a=c("83ab"),l=c("9bf2").f,i=Function.prototype,n=i.toString,d=/^\s*function ([^ (]*)/,o="name";a&&!(o in i)&&l(i,o,{configurable:!0,get:function(){try{return n.call(this).match(d)[1]}catch(e){return""}}})},efd9:function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l={class:"container pt-4"},i={class:"table mt-4 border-top table-hover"},n=Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",null,"購買時間"),Object(a["i"])("th",null,"Email"),Object(a["i"])("th",null,"購買款項"),Object(a["i"])("th",null,"應付金額"),Object(a["i"])("th",null,"是否付款"),Object(a["i"])("th",null,"編輯")])],-1),d={class:"list-unstyled"},o={class:"text-right"},r={class:"form-check form-switch"},s={key:0},b={key:1},O=Object(a["i"])("span",{class:"material-icons"},"edit",-1),u=Object(a["i"])("span",{class:"material-icons"},"delete",-1);function j(e,t,c,j,p,m){var h=Object(a["D"])("pulse-loader"),f=Object(a["D"])("pagination"),g=Object(a["D"])("orderModal"),w=Object(a["D"])("delOrder");return Object(a["w"])(),Object(a["e"])("div",l,[Object(a["i"])(h,{loading:p.loading,color:p.color},null,8,["loading","color"]),Object(a["i"])("table",i,[n,Object(a["i"])("tbody",null,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["B"])(p.orders,(function(t,c){return Object(a["w"])(),Object(a["e"])(a["a"],{key:"order".concat(c)},[p.orders.length?(Object(a["w"])(),Object(a["e"])("tr",{key:0,class:["border-top",{"text-grizzle":!t.is_paid}]},[Object(a["i"])("td",null,Object(a["G"])(e.$date(t.create_at)),1),Object(a["i"])("td",null,[Object(a["i"])("span",null,Object(a["G"])(t.user.email),1)]),Object(a["i"])("td",null,[Object(a["i"])("ul",d,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["B"])(t.products,(function(e,t){return Object(a["w"])(),Object(a["e"])("li",{key:t},Object(a["G"])(e.product.title)+" 數量："+Object(a["G"])(e.qty)+" "+Object(a["G"])(e.product.unit),1)})),128))])]),Object(a["i"])("td",o,Object(a["G"])(t.total),1),Object(a["i"])("td",null,[Object(a["i"])("div",r,[Object(a["P"])(Object(a["i"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return m.updatePaid(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[a["J"],t.is_paid]]),Object(a["i"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(a["w"])(),Object(a["e"])("span",s,"已付款")):(Object(a["w"])(),Object(a["e"])("span",b,"未付款"))],8,["for"])])]),Object(a["i"])("td",null,[Object(a["i"])("a",{href:"#",class:"editBtn me-2",onClick:Object(a["Q"])((function(e){return m.openOrderModal(t)}),["prevent"])},[O],8,["onClick"]),Object(a["i"])("a",{href:"#",class:"deleteBtn",onClick:Object(a["Q"])((function(e){return m.openDelOrderModal(t)}),["prevent"])},[u],8,["onClick"])])],2)):Object(a["f"])("",!0)],64)})),128))])]),Object(a["i"])(f,{page:p.pagination,onGetProduct:m.getOrders},null,8,["page","onGetProduct"]),Object(a["i"])(g,{ref:"orderModal",order:p.tempOrder,onUpdatePaid:m.updatePaid},null,8,["order","onUpdatePaid"]),Object(a["i"])(w,{ref:"delOrder",product:p.tempOrder,onDelete:m.delOrder},null,8,["product","onDelete"])])}var p=c("5530"),m=(c("99af"),c("1799")),h=(c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),f={class:"modal-dialog modal-xl",role:"document"},g={class:"modal-content border-0"},w=Object(a["i"])("div",{class:"modal-header bg-dark text-white"},[Object(a["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["i"])("span",null,"訂單資訊")]),Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body bg-light p-5"},y={class:"row"},k={class:"col-12 rounded shadow bg-white pt-3 mb-3"},x={class:"d-flex align-items-start"},M=Object(a["i"])("h3",{class:"me-2"},"收件人資料",-1),G={key:0,class:"badge rounded-pill bg-danger"},_={key:1,class:"badge rounded-pill bg-success"},$=Object(a["i"])("hr",null,null,-1),C={key:0,class:"mb-3"},P={class:"d-flex align-items-center mb-2"},D=Object(a["i"])("h4",{class:"font-normal fw-bold me-4"},"收件人姓名",-1),B={class:"font-normal"},U={class:"d-flex align-items-center mb-2"},J=Object(a["i"])("h4",{class:"font-normal fw-bold me-4"},"收件人地址",-1),L={class:"font-normal"},E={class:"d-flex align-items-center  mb-2"},S=Object(a["i"])("h4",{class:"font-normal fw-bold me-4"},"收件人 Email",-1),V={class:"font-normal"},q={class:"d-flex align-items-center  mb-2"},z=Object(a["i"])("h4",{class:"font-normal fw-bold me-4"},"收件人電話",-1),N={class:"font-normal"},Q={class:"col-12 rounded shadow bg-white pt-3"},F=Object(a["i"])("h3",null,"訂單細節",-1),A={class:"table"},H=Object(a["i"])("th",null,"訂單編號",-1),I=Object(a["i"])("th",null,"下單時間",-1),K=Object(a["i"])("th",null,"付款時間",-1),R={key:0},T={key:1},W=Object(a["i"])("th",null,"付款狀態",-1),X={key:0,class:"text-success"},Y={key:1,class:"text-muted"},Z=Object(a["i"])("th",null,"總金額",-1),ee=Object(a["i"])("h3",null,"購買商品明細",-1),te={class:"table"},ce=Object(a["i"])("thead",null,[Object(a["i"])("tr",null,[Object(a["i"])("th",null,"商品名稱"),Object(a["i"])("th",null,"商品數量/單位"),Object(a["i"])("th",null,"價錢總計")])],-1),ae={class:"d-flex justify-content-end"},le={class:"form-check"},ie={class:"form-check-label",for:"flexCheckDefault"},ne={key:0},de={key:1},oe={class:"modal-footer"},re=Object(a["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function se(e,t,c,l,i,n){return Object(a["w"])(),Object(a["e"])("div",h,[Object(a["i"])("div",f,[Object(a["i"])("div",g,[w,Object(a["i"])("div",v,[Object(a["i"])("div",y,[Object(a["i"])("div",k,[Object(a["i"])("div",x,[M,i.tempOrder.is_paid?(Object(a["w"])(),Object(a["e"])("span",_,"已付款")):(Object(a["w"])(),Object(a["e"])("span",G,"未付款"))]),$,i.tempOrder.user?(Object(a["w"])(),Object(a["e"])("div",C,[Object(a["i"])("div",P,[D,Object(a["i"])("h5",B,Object(a["G"])(i.tempOrder.user.name),1)]),Object(a["i"])("div",U,[J,Object(a["i"])("h5",L,Object(a["G"])(i.tempOrder.user.address),1)]),Object(a["i"])("div",E,[S,Object(a["i"])("h5",V,Object(a["G"])(i.tempOrder.user.email),1)]),Object(a["i"])("div",q,[z,Object(a["i"])("h5",N,Object(a["G"])(i.tempOrder.user.tel),1)])])):Object(a["f"])("",!0)]),Object(a["i"])("div",Q,[F,Object(a["i"])("table",A,[Object(a["i"])("tbody",null,[Object(a["i"])("tr",null,[H,Object(a["i"])("td",null,Object(a["G"])(i.tempOrder.id),1)]),Object(a["i"])("tr",null,[I,Object(a["i"])("td",null,Object(a["G"])(e.$date(i.tempOrder.create_at)),1)]),Object(a["i"])("tr",null,[K,Object(a["i"])("td",null,[i.tempOrder.paid_date?(Object(a["w"])(),Object(a["e"])("span",R,Object(a["G"])(e.$date(i.tempOrder.paid_date)),1)):(Object(a["w"])(),Object(a["e"])("span",T,"時間不正確"))])]),Object(a["i"])("tr",null,[W,Object(a["i"])("td",null,[i.tempOrder.is_paid?(Object(a["w"])(),Object(a["e"])("strong",X,"已付款")):(Object(a["w"])(),Object(a["e"])("span",Y,"尚未付款"))])]),Object(a["i"])("tr",null,[Z,Object(a["i"])("td",null,Object(a["G"])(i.tempOrder.total),1)])])]),ee,Object(a["i"])("table",te,[ce,Object(a["i"])("tbody",null,[(Object(a["w"])(!0),Object(a["e"])(a["a"],null,Object(a["B"])(i.tempOrder.products,(function(t){return Object(a["w"])(),Object(a["e"])("tr",{key:t.id},[Object(a["i"])("th",null,Object(a["G"])(t.product.title),1),Object(a["i"])("td",null,Object(a["G"])(t.qty)+" / "+Object(a["G"])(t.product.unit),1),Object(a["i"])("td",null,Object(a["G"])(e.$toCurrency(t.final_total)),1)])})),128))])]),Object(a["i"])("div",ae,[Object(a["i"])("div",le,[Object(a["P"])(Object(a["i"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.tempOrder.is_paid=e})},null,512),[[a["J"],i.tempOrder.is_paid]]),Object(a["i"])("label",ie,[i.tempOrder.is_paid?(Object(a["w"])(),Object(a["e"])("span",ne,"已付款")):(Object(a["w"])(),Object(a["e"])("span",de,"未付款"))])])])])])]),Object(a["i"])("div",oe,[re,Object(a["i"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.$emit("update-paid",i.tempOrder)})}," 修改付款狀態 ")])])])],512)}var be=c("7c2b"),Oe=c.n(be),ue={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{}}},emits:["update-product"],inject:["emitter"],watch:{order:function(){this.tempOrder=this.order}},methods:{openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new Oe.a(this.$refs.modal)}};ue.render=se;var je=ue,pe=c("6ff1"),me={name:"Orders",data:function(){return{loading:!1,color:"#9DBEC7",orders:{},isNew:!1,pagination:{},tempOrder:{}}},components:{pagination:m["a"],orderModal:je,delOrder:pe["a"]},methods:{getOrders:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/admin/orders?page=").concat(t);this.$http.get(c).then((function(t){t.data.success?(e.loading=!1,e.orders=t.data.orders,e.pagination=t.data.pagination):e.loading=!1})).catch((function(e){console.log(e)}))},openOrderModal:function(e){this.tempOrder=Object(p["a"])({},e),this.isNew=!1,this.$refs.orderModal.openModal()},openDelOrderModal:function(e){this.tempOrder=Object(p["a"])({},e),this.$refs.delOrder.openModal()},updatePaid:function(e){var t=this;this.loading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/admin/order/").concat(e.id),a={is_paid:e.is_paid};this.$http.put(c,{data:a}).then((function(e){e.data.success?(t.loading=!1,t.$refs.orderModal.hideModal(),t.getOrders()):t.loading=!1})).catch((function(e){console.log(e)}))},delOrder:function(){var e=this;this.loading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/admin/order/").concat(this.tempOrder.id);this.$http.delete(t).then((function(t){t.data.success?(e.loading=!1,e.getOrders(),e.$refs.delOrder.hideModal()):e.loading=!1})).catch((function(e){console.log(e)}))}},created:function(){this.getOrders()}};me.render=j;t["default"]=me}}]);
//# sourceMappingURL=chunk-9662a754.c6fa7006.js.map