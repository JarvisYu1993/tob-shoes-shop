(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f424260e"],{"61bc":function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a");var o=c("7a23"),i={class:"container py-4"},l={class:"d-flex justify-content-between"},a=Object(o["i"])("h1",{class:""},"商品列表",-1),n={class:"d-flex align-items-center"},d={class:"table mt-4 border-top table-hover"},r=Object(o["i"])("thead",null,[Object(o["i"])("tr",null,[Object(o["i"])("th",{width:"45%"},"產品"),Object(o["i"])("th",{width:"10%"},"類別"),Object(o["i"])("th",{width:"10%"},"原價"),Object(o["i"])("th",{width:"10%"},"售價"),Object(o["i"])("th",{width:"10%"},"啟用"),Object(o["i"])("th",{width:"15%"},"編輯/刪除")])],-1),s={class:"d-flex align-items-center"},u={class:"d-flex flex-column"},b={class:"align-middle"},p={class:"align-middle"},m={class:"align-middle"},j={class:"align-middle"},O={key:0,class:"text-success"},f={key:1},h={class:"align-middle"},g=Object(o["i"])("span",{class:"material-icons"},"edit",-1),v=Object(o["i"])("span",{class:"material-icons"},"delete",-1),P={class:"d-flex justify-content-between"},y={class:"text-gray"};function w(t,e,c,w,k,x){var U=Object(o["D"])("Loading"),M=Object(o["D"])("pagination"),$=Object(o["D"])("product-modal"),C=Object(o["D"])("delProduct-modal");return Object(o["w"])(),Object(o["e"])("div",i,[Object(o["i"])(U,{active:k.isLoading},null,8,["active"]),Object(o["i"])("div",l,[a,Object(o["i"])("div",n,[Object(o["i"])("button",{class:"btn btn-secondary text-white me-2",onClick:e[1]||(e[1]=function(t){return x.openModal("new")})}," 新增商品 ")])]),Object(o["i"])("table",d,[r,Object(o["i"])("tbody",null,[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["B"])(k.products,(function(t){return Object(o["w"])(),Object(o["e"])("tr",{key:t.id},[Object(o["i"])("td",s,[Object(o["i"])("img",{class:"align-middle me-3",src:t.imageUrl,alt:t.title,style:{width:"150px",height:"150px"}},null,8,["src","alt"]),Object(o["i"])("div",u,[Object(o["i"])("h4",null,Object(o["G"])(t.title),1),Object(o["i"])("span",null,Object(o["G"])(t.description),1)])]),Object(o["i"])("td",b,Object(o["G"])(t.category),1),Object(o["i"])("td",p,Object(o["G"])(t.origin_price),1),Object(o["i"])("td",m,Object(o["G"])(t.price),1),Object(o["i"])("td",j,[t.is_enabled?(Object(o["w"])(),Object(o["e"])("span",O,"啟用")):(Object(o["w"])(),Object(o["e"])("span",f,"未啟用"))]),Object(o["i"])("td",h,[Object(o["i"])("a",{href:"#",class:"editBtn me-2",onClick:Object(o["Q"])((function(e){return x.openModal("edit",t)}),["prevent"])},[g],8,["onClick"]),Object(o["i"])("a",{href:"#",class:"deleteBtn",onClick:Object(o["Q"])((function(e){return x.openModal("delete",t)}),["prevent"])},[v],8,["onClick"])])])})),128))])]),Object(o["i"])("div",P,[Object(o["i"])("p",y,"商品總共有"+Object(o["G"])(k.products.length)+"項",1),Object(o["i"])(M,{page:k.pagination,onGetProduct:x.getProductList},null,8,["page","onGetProduct"])]),Object(o["i"])($,{ref:"productModal",product:k.tempProduct,"is-new":k.isNew,onUpdateProduct:x.updateProduct},null,8,["product","is-new","onUpdateProduct"]),Object(o["i"])(C,{ref:"delProductModal","delete-item":k.tempProduct,onDelete:x.getProductList},null,8,["delete-item","onDelete"])])}var k=c("5530"),x=(c("99af"),c("ac1f"),c("5319"),c("1799")),U=(c("a434"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),M={class:"modal-dialog modal-xl",role:"document"},$={class:"modal-content border-0"},C={class:"modal-header bg-dark text-white"},L={class:"modal-title",id:"exampleModalLabel"},V=Object(o["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),G={class:"modal-body"},K={class:"row"},_={class:"col-sm-4"},N={class:"mb-3"},D=Object(o["i"])("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),I={class:"mb-3"},S=Object(o["i"])("label",{for:"customFile",class:"form-label"}," 或 上傳圖片 ",-1),B={class:"mb-3"},F={class:"col-sm-8"},z={class:"mb-3"},J=Object(o["i"])("label",{for:"title",class:"form-label"},"標題",-1),T={class:"row gx-2"},A={class:"mb-3 col-md-6"},Q=Object(o["i"])("label",{for:"category",class:"form-label"},"分類",-1),E={class:"mb-3 col-md-6"},Y=Object(o["i"])("label",{for:"price",class:"form-label"},"單位",-1),q={class:"row gx-2"},H={class:"mb-3 col-md-6"},R=Object(o["i"])("label",{for:"origin_price",class:"form-label"},"原價",-1),W={class:"mb-3 col-md-6"},X=Object(o["i"])("label",{for:"price",class:"form-label"},"售價",-1),Z={class:"mb-3"},tt=Object(o["i"])("hr",null,null,-1),et={class:"mb-3"},ct=Object(o["i"])("label",{for:"description",class:"form-label"},"產品描述",-1),ot={class:"mb-3"},it=Object(o["i"])("label",{for:"content",class:"form-label"},"說明內容",-1),lt={class:"mb-3"},at={class:"form-check"},nt=Object(o["i"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),dt={class:"modal-footer"},rt=Object(o["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function st(t,e,c,i,l,a){return Object(o["w"])(),Object(o["e"])("div",U,[Object(o["i"])("div",M,[Object(o["i"])("div",$,[Object(o["i"])("div",C,[Object(o["i"])("h5",L,[Object(o["i"])("span",null,Object(o["G"])(c.isNew?"新增產品":"編輯產品"),1)]),V]),Object(o["i"])("div",G,[Object(o["i"])("div",K,[Object(o["i"])("div",_,[Object(o["i"])("div",N,[D,Object(o["P"])(Object(o["i"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":e[1]||(e[1]=function(t){return l.tempProduct.imageUrl=t}),placeholder:"請輸入圖片連結"},null,512),[[o["K"],l.tempProduct.imageUrl]])]),Object(o["i"])("div",I,[S,Object(o["i"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return a.uploadFile&&a.uploadFile.apply(a,arguments)})},null,544)]),Object(o["i"])("img",{class:"img-fluid",src:l.tempProduct.imageUrl},null,8,["src"]),l.tempProduct.imagesUrl?(Object(o["w"])(),Object(o["e"])(o["a"],{key:0},[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["B"])(l.tempProduct.imagesUrl,(function(t,e){return Object(o["w"])(),Object(o["e"])("div",{class:"mb-3",key:e},[Object(o["P"])(Object(o["i"])("input",{type:"url",class:"form-control","onUpdate:modelValue":function(t){return l.tempProduct.imagesUrl[e]=t},placeholder:"請輸入連結"},null,8,["onUpdate:modelValue"]),[[o["K"],l.tempProduct.imagesUrl[e]]]),Object(o["i"])("div",B,[Object(o["i"])("img",{class:"img-fluid",src:t},null,8,["src"])]),Object(o["i"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return l.tempProduct.imagesUrl.splice(e,1)}}," 移除 ",8,["onClick"])])})),128)),l.tempProduct.imagesUrl[l.tempProduct.imagesUrl.length-1]||!l.tempProduct.imagesUrl.length?(Object(o["w"])(),Object(o["e"])("button",{key:0,type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(t){return l.tempProduct.imagesUrl.push("")})}," 新增圖片 ")):Object(o["f"])("",!0)],64)):Object(o["f"])("",!0)]),Object(o["i"])("div",F,[Object(o["i"])("div",z,[J,Object(o["P"])(Object(o["i"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[4]||(e[4]=function(t){return l.tempProduct.title=t}),placeholder:"請輸入標題"},null,512),[[o["K"],l.tempProduct.title]])]),Object(o["i"])("div",T,[Object(o["i"])("div",A,[Q,Object(o["P"])(Object(o["i"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":e[5]||(e[5]=function(t){return l.tempProduct.category=t}),placeholder:"請輸入分類"},null,512),[[o["K"],l.tempProduct.category]])]),Object(o["i"])("div",E,[Y,Object(o["P"])(Object(o["i"])("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":e[6]||(e[6]=function(t){return l.tempProduct.unit=t}),placeholder:"請輸入單位"},null,512),[[o["K"],l.tempProduct.unit]])])]),Object(o["i"])("div",q,[Object(o["i"])("div",H,[R,Object(o["P"])(Object(o["i"])("input",{type:"number",class:"form-control",id:"origin_price",min:"0","onUpdate:modelValue":e[7]||(e[7]=function(t){return l.tempProduct.origin_price=t}),placeholder:"請輸入原價"},null,512),[[o["K"],l.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["i"])("div",W,[X,Object(o["P"])(Object(o["i"])("input",{type:"number",class:"form-control",id:"price",min:"0","onUpdate:modelValue":e[8]||(e[8]=function(t){return l.tempProduct.price=t}),placeholder:"請輸入售價"},null,512),[[o["K"],l.tempProduct.price,void 0,{number:!0}]])])]),l.tempProduct.variable?(Object(o["w"])(),Object(o["e"])(o["a"],{key:0},[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["B"])(l.tempProduct.variable,(function(t,e){return Object(o["w"])(),Object(o["e"])("div",{class:"mb-3",key:e},[Object(o["P"])(Object(o["i"])("input",{type:"text",class:"form-control","onUpdate:modelValue":function(t){return l.tempProduct.variable[e].size=t},placeholder:"請輸入尺寸"},null,8,["onUpdate:modelValue"]),[[o["K"],l.tempProduct.variable[e].size]]),Object(o["i"])("div",Z,[Object(o["i"])("button",{class:"btn btn-outline-secondary",id:t.id},Object(o["G"])(t.size),9,["id"])]),Object(o["i"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return l.tempProduct.variable.splice(e,1)}}," 移除 ",8,["onClick"])])})),128)),l.tempProduct.variable[l.tempProduct.variable.length-1]||!l.tempProduct.variable.length?(Object(o["w"])(),Object(o["e"])("button",{key:0,type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[9]||(e[9]=function(t){return l.tempProduct.variable.push({})})}," 新增尺寸 ")):Object(o["f"])("",!0)],64)):Object(o["f"])("",!0),tt,Object(o["i"])("div",et,[ct,Object(o["P"])(Object(o["i"])("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":e[10]||(e[10]=function(t){return l.tempProduct.description=t}),placeholder:"請輸入產品描述"},null,512),[[o["K"],l.tempProduct.description]])]),Object(o["i"])("div",ot,[it,Object(o["P"])(Object(o["i"])("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":e[11]||(e[11]=function(t){return l.tempProduct.content=t}),placeholder:"請輸入產品說明內容"},null,512),[[o["K"],l.tempProduct.content]])]),Object(o["i"])("div",lt,[Object(o["i"])("div",at,[Object(o["P"])(Object(o["i"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=function(t){return l.tempProduct.is_enabled=t}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[o["J"],l.tempProduct.is_enabled]]),nt])])])])]),Object(o["i"])("div",dt,[rt,Object(o["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[13]||(e[13]=function(e){return t.$emit("update-product",l.tempProduct)})}," 確認 ")])])])],512)}var ut=c("7c2b"),bt=c.n(ut),pt={props:{product:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},data:function(){return{status:{},modal:"",tempProduct:{variable:[]},size:""}},watch:{product:function(){this.tempProduct=this.product,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[])}},methods:{uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",e);var o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/admin/upload");this.status.fileUploading=!0,this.$http.post(o,c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.status.fileUploading=!1,e.data.success?(t.tempProduct.imageUrl=e.data.imageUrl,t.$refs.fileInput.value=""):t.$refs.fileInput.value=""}))},openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}},mounted:function(){this.modal=new bt.a(this.$refs.modal)}};pt.render=st;var mt=pt,jt={id:"delProductModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},Ot={class:"modal-dialog"},ft={class:"modal-content border-0"},ht=Object(o["i"])("div",{class:"modal-header bg-danger text-white"},[Object(o["i"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(o["i"])("span",null,"刪除產品")]),Object(o["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),gt={class:"modal-body"},vt=Object(o["h"])(" 是否刪除 "),Pt={class:"text-danger"},yt=Object(o["h"])(" 商品(刪除後將無法恢復)。 "),wt={class:"modal-footer"},kt=Object(o["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function xt(t,e,c,i,l,a){return Object(o["w"])(),Object(o["e"])("div",jt,[Object(o["i"])("div",Ot,[Object(o["i"])("div",ft,[ht,Object(o["i"])("div",gt,[vt,Object(o["i"])("strong",Pt,Object(o["G"])(c.deleteItem.title),1),yt]),Object(o["i"])("div",wt,[kt,Object(o["i"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(){return a.delProduct&&a.delProduct.apply(a,arguments)})}," 確認刪除 ")])])])],512)}var Ut={props:{deleteItem:{type:Object,default:function(){return{}}}},data:function(){return{modal:""}},mounted:function(){this.modal=new bt.a(this.$refs.modal,{keyboard:!1,backdrop:"static"})},methods:{delProduct:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/admin/product/").concat(this.deleteItem.id);this.$http.delete(e).then((function(e){e.data.success&&(t.hideModal(),t.$emit("delete"))})).catch((function(t){console.log(t)}))},openModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}}};Ut.render=xt;var Mt=Ut,$t={name:"Products",data:function(){return{token:"",products:[],isNew:!1,tempProduct:{imagesUrl:[],variable:[]},pagination:{},isLoading:!1}},components:{pagination:x["a"],productModal:mt,delProductModal:Mt},methods:{getProductList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/admin/products?page=").concat(e);this.$http.get(c).then((function(e){e.data.success&&(t.products=e.data.products,t.pagination=e.data.pagination,t.isLoading=!1)})).catch((function(t){console.log(t)}))},openModal:function(t,e){"new"===t?(this.isNew=!0,this.tempProduct={imagesUrl:[],variable:[]},this.$refs.productModal.openModal()):"edit"===t?(this.isNew=!1,this.tempProduct=Object(k["a"])({},e),console.log(this.tempProduct),this.$refs.productModal.openModal()):"delete"===t&&(this.isNew=!1,this.tempProduct=Object(k["a"])({},e),this.$refs.delProductModal.openModal())},updateProduct:function(t){var e=this;this.tempProduct=t;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/admin/product"),o="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/admin/product/").concat(this.tempProduct.id),o="put"),this.$http[o](c,{data:this.tempProduct}).then((function(t){t.data.success&&(e.$refs.productModal.hideModal(),e.getProductList())})).catch((function(t){console.log(t)}))}},mounted:function(){this.token=document.cookie.replace(/(?:(?:^|.*;\s*)YuToken\s*=\s*([^;]*).*$)|^.*$/,"$1"),""===this.token&&this.$router.push("/login"),this.$http.defaults.headers.common.Authorization=this.token},created:function(){this.getProductList()}};$t.render=w;e["default"]=$t},a434:function(t,e,c){"use strict";var o=c("23e7"),i=c("23cb"),l=c("a691"),a=c("50c4"),n=c("7b0b"),d=c("65f0"),r=c("8418"),s=c("1dde"),u=s("splice"),b=Math.max,p=Math.min,m=9007199254740991,j="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var c,o,s,u,O,f,h=n(this),g=a(h.length),v=i(t,g),P=arguments.length;if(0===P?c=o=0:1===P?(c=0,o=g-v):(c=P-2,o=p(b(l(e),0),g-v)),g+c-o>m)throw TypeError(j);for(s=d(h,o),u=0;u<o;u++)O=v+u,O in h&&r(s,u,h[O]);if(s.length=o,c<o){for(u=v;u<g-o;u++)O=u+o,f=u+c,O in h?h[f]=h[O]:delete h[f];for(u=g;u>g-o+c;u--)delete h[u-1]}else if(c>o)for(u=g-o;u>v;u--)O=u+o-1,f=u+c-1,O in h?h[f]=h[O]:delete h[f];for(u=0;u<c;u++)h[u+v]=arguments[u+2];return h.length=g-o+c,s}})},e01a:function(t,e,c){"use strict";var o=c("23e7"),i=c("83ab"),l=c("da84"),a=c("5135"),n=c("861d"),d=c("9bf2").f,r=c("e893"),s=l.Symbol;if(i&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new s(t):void 0===t?s():s(t);return""===t&&(u[e]=!0),e};r(b,s);var p=b.prototype=s.prototype;p.constructor=b;var m=p.toString,j="Symbol(test)"==String(s("test")),O=/^Symbol\((.*)\)[^)]+$/;d(p,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,e=m.call(t);if(a(u,t))return"";var c=j?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-f424260e.3d03da09.js.map