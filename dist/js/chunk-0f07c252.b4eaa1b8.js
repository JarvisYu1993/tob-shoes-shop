(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f07c252"],{"0d80":function(t,e,n){t.exports=n.p+"img/cart.57771968.jpg"},"191f":function(t,e,n){"use strict";var c=n("7a23"),o=Object(c["h"])("div",{class:"vld-background",style:{"backdrop-filter":"blur(2px)"}},null,-1),a={class:"vld-icon"};function i(t,e,n,i,l,r){return Object(c["v"])(),Object(c["d"])("div",{class:["is-active is-full-page",{"vld-overlay":n.loading}]},[o,Object(c["M"])(Object(c["h"])("div",a,[Object(c["h"])("div",{class:"v-pulse v-pulse1",style:[l.spinnerStyle,l.spinnerDelay1]},null,4),Object(c["h"])("div",{class:"v-pulse v-pulse2",style:[l.spinnerStyle,l.spinnerDelay2]},null,4),Object(c["h"])("div",{class:"v-pulse v-pulse3",style:[l.spinnerStyle,l.spinnerDelay3]},null,4)],512),[[c["I"],n.loading]])],2)}var l={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}};n("a01d");l.render=i;e["a"]=l},"1dde":function(t,e,n){var c=n("d039"),o=n("b622"),a=n("2d00"),i=o("species");t.exports=function(t){return a>=51||!c((function(){var e=[],n=e.constructor={};return n[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},8418:function(t,e,n){"use strict";var c=n("c04e"),o=n("9bf2"),a=n("5c6c");t.exports=function(t,e,n){var i=c(e);i in t?o.f(t,i,a(0,n)):t[i]=n}},"99af":function(t,e,n){"use strict";var c=n("23e7"),o=n("d039"),a=n("e8b5"),i=n("861d"),l=n("7b0b"),r=n("50c4"),s=n("8418"),d=n("65f0"),u=n("1dde"),b=n("b622"),p=n("2d00"),h=b("isConcatSpreadable"),f=9007199254740991,m="Maximum allowed index exceeded",j=p>=51||!o((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),O=u("concat"),g=function(t){if(!i(t))return!1;var e=t[h];return void 0!==e?!!e:a(t)},v=!j||!O;c({target:"Array",proto:!0,forced:v},{concat:function(t){var e,n,c,o,a,i=l(this),u=d(i,0),b=0;for(e=-1,c=arguments.length;e<c;e++)if(a=-1===e?i:arguments[e],g(a)){if(o=r(a.length),b+o>f)throw TypeError(m);for(n=0;n<o;n++,b++)n in a&&s(u,b,a[n])}else{if(b>=f)throw TypeError(m);s(u,b++,a)}return u.length=b,u}})},a01d:function(t,e,n){"use strict";n("e007")},e007:function(t,e,n){},e4f3:function(t,e,n){"use strict";var c=function(t){return{all:t=t||new Map,on:function(e,n){var c=t.get(e);c?c.push(n):t.set(e,[n])},off:function(e,n){var c=t.get(e);c&&(n?c.splice(c.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var c=t.get(e);c&&c.slice().map((function(t){t(n)})),(c=t.get("*"))&&c.slice().map((function(t){t(e,n)}))}}},o=c();e["a"]=o},eb78:function(t,e,n){"use strict";n.r(e);var c=n("7a23"),o=n("0d80"),a=n.n(o),i={class:"bg-light py-4 py-md-8 py-lg-10 h-100vh"},l={key:0,class:"container p-4 p-md-6 bg-white"},r={class:"d-flex align-items-center justify-content-between mb-3 pb-3 border-bottom"},s=Object(c["h"])("h3",{class:"font-md fw-bold text-center"},"購物車品項",-1),d=Object(c["h"])("span",{class:"material-icons"}," chevron_left ",-1),u=Object(c["g"])("繼續購物 "),b={class:"table table-hover d-none d-md-table"},p={class:"align-middle text-start",width:"50%"},h={class:"d-flex align-items-center"},f={class:"d-flex flex-column align-items-start"},m={class:"font-lg-m mb-1 fw-bold"},j={class:"font-lg-normal mb-1"},O={class:"font-lg-normal"},g={class:"align-middle",width:"30%"},v={class:"select-qty"},y=Object(c["h"])("span",{class:"material-icons"}," remove ",-1),C=Object(c["h"])("span",{class:"material-icons"}," add ",-1),w={class:"font-lg-m align-middle",width:"10%"},x={width:"10%",class:"align-middle"},k={class:"d-flex justify-content-between align-items-center mb-3"},D={class:"d-flex align-items-center"},$={class:"d-flex flex-column align-items-start"},_={class:"font-md-normal fw-bold"},q={class:"font-md-normal"},z={class:"font-md-normal"},B={class:"font-normal"},S={class:"row justify-content-between align-items-center"},T={class:"col-8"},N={class:"select-qty"},M=Object(c["h"])("span",{class:"material-icons"}," remove ",-1),L=Object(c["h"])("span",{class:"material-icons"}," add ",-1),I={class:"col-4 d-flex justify-content-end"},A={class:"row justify-content-end"},E={class:"col-md-6 col-lg-3"},U={class:"input-group mb-3"},F={key:0,class:"border-top pt-2"},J={class:"text-end mb-2"},P=Object(c["g"])("小計： "),H={class:"text-end"},R=Object(c["g"])("折扣："),V={class:"d-flex align-items-center justify-content-end mb-4\n            border-bottom py-3"},G=Object(c["h"])("span",{class:"font-md fw-bold"},"總金額：",-1),K={class:"font-md fw-bold"},Q={key:1,class:"d-flex align-items-center justify-content-between mb-4\n        border-top border-bottom py-3"},W=Object(c["h"])("span",{class:"font-md fw-bold"},"總金額：",-1),X={class:"font-md fw-bold"},Y={class:"d-flex justify-content-between justify-content-md-end"},Z=Object(c["h"])("span",{class:"material-icons"}," chevron_left ",-1),tt=Object(c["g"])("繼續購物 "),et={key:1,class:"container py-md-5 py-10"},nt={class:"row py-7 py-md-0"},ct={class:"col d-flex flex-column align-items-center"},ot=Object(c["h"])("img",{class:"cart-img",src:a.a,alt:"cart"},null,-1),at=Object(c["h"])("h4",{class:"font-md my-4 fw-bold"},"購物車無商品，繼續逛逛吧",-1),it={class:"d-flex justify-content-center"},lt=Object(c["g"])(" 繼續購物 ");function rt(t,e,n,o,a,rt){var st=Object(c["A"])("pulse-loader"),dt=Object(c["A"])("router-link");return Object(c["v"])(),Object(c["d"])(c["a"],null,[Object(c["h"])(st,{loading:a.loading,color:a.color},null,8,["loading","color"]),Object(c["h"])("section",i,[a.num>0?(Object(c["v"])(),Object(c["d"])("div",l,[Object(c["h"])("div",r,[s,Object(c["h"])(dt,{to:"/products/所有鞋類",class:"btn btn-outline-primary btn-sm rounded-pill go-product px-3 d-none d-md-flex"},{default:Object(c["L"])((function(){return[d,u]})),_:1})]),Object(c["h"])("table",b,[Object(c["h"])("tbody",null,[(Object(c["v"])(!0),Object(c["d"])(c["a"],null,Object(c["z"])(a.cart.carts,(function(e){return Object(c["v"])(),Object(c["d"])("tr",{key:e.id,class:"text-center"},[Object(c["h"])("td",p,[Object(c["h"])("div",h,[Object(c["h"])(dt,{to:"/product/".concat(e.product.id)},{default:Object(c["L"])((function(){return[Object(c["h"])("img",{class:"table-img me-4",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"])]})),_:2},1032,["to"]),Object(c["h"])("div",f,[Object(c["h"])("h4",m,Object(c["D"])(e.product.title),1),Object(c["h"])("h5",j,"尺寸："+Object(c["D"])(e.size.size)+" / "+Object(c["D"])(e.product.unit),1),Object(c["h"])("h5",O,Object(c["D"])(e.product.content),1)])])]),Object(c["h"])("td",g,[Object(c["h"])("div",v,[Object(c["h"])("button",{type:"button",onClick:function(t){return rt.updateCart(e,"del")},disabled:1===e.qty},[y],8,["onClick","disabled"]),Object(c["h"])("input",{type:"number",value:e.qty,readonly:"readonly"},null,8,["value"]),Object(c["h"])("button",{type:"button",onClick:function(t){return rt.updateCart(e,"add")}},[C],8,["onClick"])])]),Object(c["h"])("td",w," NT$"+Object(c["D"])(t.$toCurrency(e.total)),1),Object(c["h"])("td",x,[Object(c["h"])("a",{href:"#",class:"material-icons del-icon font-xl rounded-pill",onClick:Object(c["N"])((function(t){return rt.delCartItem(e.id)}),["prevent"])}," delete ",8,["onClick"])])])})),128))])]),(Object(c["v"])(!0),Object(c["d"])(c["a"],null,Object(c["z"])(a.cart.carts,(function(e){return Object(c["v"])(),Object(c["d"])("div",{class:"d-block d-md-none mb-4",key:e.id},[Object(c["h"])("div",k,[Object(c["h"])("div",D,[Object(c["h"])(dt,{to:"/product/".concat(e.product.id)},{default:Object(c["L"])((function(){return[Object(c["h"])("img",{class:"table-img me-2",src:e.product.imageUrl,alt:e.product.title},null,8,["src","alt"])]})),_:2},1032,["to"]),Object(c["h"])("div",$,[Object(c["h"])("h4",_,Object(c["D"])(e.product.title),1),Object(c["h"])("h5",q,"尺寸："+Object(c["D"])(e.size.size)+" / "+Object(c["D"])(e.product.unit),1),Object(c["h"])("h5",z,Object(c["D"])(e.product.content),1)])]),Object(c["h"])("p",B,"NT$"+Object(c["D"])(t.$toCurrency(e.total)),1)]),Object(c["h"])("div",S,[Object(c["h"])("div",T,[Object(c["h"])("div",N,[Object(c["h"])("button",{type:"button",onClick:function(t){return rt.updateCart(e,"del")},disabled:1===e.qty},[M],8,["onClick","disabled"]),Object(c["h"])("input",{type:"number",value:e.qty,readonly:"readonly"},null,8,["value"]),Object(c["h"])("button",{type:"button",onClick:function(t){return rt.updateCart(e,"add")}},[L],8,["onClick"])])]),Object(c["h"])("div",I,[Object(c["h"])("a",{href:"#",class:"material-icons del-icon font-xl rounded-pill",onClick:Object(c["N"])((function(t){return rt.delCartItem(e.id)}),["prevent"])}," delete ",8,["onClick"])])])])})),128)),Object(c["h"])("div",A,[Object(c["h"])("div",E,[Object(c["h"])("div",U,[Object(c["M"])(Object(c["h"])("input",{min:"1",type:"text",class:"form-control",placeholder:"輸入優惠券代碼","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.coupon_code=t})},null,512),[[c["H"],a.coupon_code]]),Object(c["h"])("button",{type:"button",class:"btn btn-danger",id:"basic-addon2",onClick:e[2]||(e[2]=function(){return rt.addCouponCode&&rt.addCouponCode.apply(rt,arguments)})}," 確認 ")])])]),a.cart.final_total!=a.cart.total?(Object(c["v"])(),Object(c["d"])("div",F,[Object(c["h"])("p",J,[P,Object(c["h"])("span",null,"NT$"+Object(c["D"])(t.$toCurrency(a.cart.total)),1)]),Object(c["h"])("p",H,[R,Object(c["h"])("span",null,"NT$ "+Object(c["D"])(t.$toCurrency(Math.round(a.cart.final_total-a.cart.total))),1)]),Object(c["h"])("div",V,[G,Object(c["h"])("span",K,"NT$"+Object(c["D"])(t.$toCurrency(Math.round(a.cart.final_total))),1)])])):(Object(c["v"])(),Object(c["d"])("div",Q,[W,Object(c["h"])("span",X,"NT$"+Object(c["D"])(t.$toCurrency(Math.round(a.cart.final_total))),1)])),Object(c["h"])("div",Y,[Object(c["h"])(dt,{to:"/products/所有鞋類",class:"btn btn-sm btn-outline-primary rounded-0 go-product d-md-none"},{default:Object(c["L"])((function(){return[Z,tt]})),_:1}),Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[3]||(e[3]=function(){return rt.goCheckout&&rt.goCheckout.apply(rt,arguments)})}," 前往付款資料 ")])])):(Object(c["v"])(),Object(c["d"])("div",et,[Object(c["h"])("div",nt,[Object(c["h"])("div",ct,[ot,at,Object(c["h"])("div",it,[Object(c["h"])(dt,{to:"/products/所有鞋類",class:"btn btn-outline-primary"},{default:Object(c["L"])((function(){return[lt]})),_:1})])])])]))])],64)}n("99af");var st=n("191f"),dt=n("e4f3"),ut={name:"Cart",data:function(){return{loading:!1,color:"#9DBEC7",cart:{},coupon_code:"",num:0}},components:{PulseLoader:st["a"]},methods:{getCart:function(){var t=this;this.loading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data,t.num=t.cart.carts.length,t.loading=!1)})).catch((function(){t.$swal.fire({position:"top",icon:"error",title:"購物車取得失敗",showConfirmButton:!1,timer:1e3}),t.loading=!1}))},updateCart:function(t,e){var n=this;switch(this.loading=!0,e){case"del":t.qty-=1;break;case"add":t.qty+=1;break;default:break}var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/cart/").concat(t.id),o={product_id:t.product_id,qty:t.qty};this.$http.put(c,{data:o}).then((function(t){t.data.success?(n.loading=!1,n.getCart()):(n.$swal.fire({position:"top",icon:"error",title:"商品數量無法修改",showConfirmButton:!1,timer:1e3}),n.loading=!1)})).catch((function(){n.$swal.fire({position:"top",icon:"error",title:"商品數量取得失敗",showConfirmButton:!1,timer:1e3}),n.loading=!1}))},delCartItem:function(t){var e=this;this.loading=!0;var n="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/cart/").concat(t);this.$http.delete(n).then((function(t){t.data.success&&(e.loading=!1,dt["a"].emit("product-cart"),e.getCart())})).catch((function(){e.$swal.fire({position:"top",icon:"error",title:"無法刪除商品",showConfirmButton:!1,timer:1e3}),e.loading=!1}))},addCouponCode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("maroon5","/coupon"),n={code:this.coupon_code};this.loading=!0,this.$http.post(e,{data:n}).then((function(e){e.data.success?(t.getCart(),t.loading=!1,t.$swal.fire({position:"top",icon:"success",title:e.data.message,showConfirmButton:!1,timer:1e3})):(t.$swal.fire({position:"top",icon:"error",title:e.data.message,showConfirmButton:!1,timer:1e3}),t.loading=!1)})).catch((function(){t.$swal.fire({position:"top",icon:"error",title:"優惠券取得失敗",showConfirmButton:!1,timer:1e3}),t.loading=!1}))},goCheckout:function(){this.$router.push("/checkout"),window.scrollTo({top:0,behavior:"instant"})}},mounted:function(){var t=this;dt["a"].on("product-cart",(function(){t.getCart()})),this.getCart()},unmounted:function(){var t=this;dt["a"].off("product-cart",(function(){return t.getCart()}))}};ut.render=rt;e["default"]=ut}}]);
//# sourceMappingURL=chunk-0f07c252.b4eaa1b8.js.map